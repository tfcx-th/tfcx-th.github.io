<!DOCTYPE html><html lang="zh-CN"><head><meta name="generator" content="Hexo 3.8.0"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="前端小码农~"><title>git常用指令 | 天赋创新的blog</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/normalize/8.0.1/normalize.min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//lib.baomitu.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//lib.baomitu.com/jquery/3.4.0/jquery.min.js"></script><link rel="icon" mask sizes="any" href="/favicon.ico"><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">git常用指令</h1><a id="logo" href="/.">天赋创新的blog</a><p class="description"></p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">git常用指令</h1><div class="post-meta">May 27, 2019<span> | </span><span class="category"><a href="/categories/DevTools/">DevTools</a></span></div><div class="clear"><div class="toc-article" id="toc"><div class="toc-title">文章目录</div><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#总览-2-19-1"><span class="toc-number">1.</span> <span class="toc-text">总览(2.19.1)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#安装与配置"><span class="toc-number">2.</span> <span class="toc-text">安装与配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#安装"><span class="toc-number">2.1.</span> <span class="toc-text">安装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#全局配置"><span class="toc-number">2.2.</span> <span class="toc-text">全局配置</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#创建版本库"><span class="toc-number">3.</span> <span class="toc-text">创建版本库</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#初始化"><span class="toc-number">3.1.</span> <span class="toc-text">初始化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#添加文件"><span class="toc-number">3.2.</span> <span class="toc-text">添加文件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#版本更新与回退"><span class="toc-number">4.</span> <span class="toc-text">版本更新与回退</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#版本更新"><span class="toc-number">4.1.</span> <span class="toc-text">版本更新</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#版本回退"><span class="toc-number">4.2.</span> <span class="toc-text">版本回退</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#撤销修改"><span class="toc-number">4.3.</span> <span class="toc-text">撤销修改</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#删除文件"><span class="toc-number">4.4.</span> <span class="toc-text">删除文件</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#GitHub远程仓库"><span class="toc-number">5.</span> <span class="toc-text">GitHub远程仓库</span></a></li></ol></div></div><div class="post-content"><h2 id="总览-2-19-1"><a href="#总览-2-19-1" class="headerlink" title="总览(2.19.1)"></a>总览(2.19.1)</h2><figure class="highlight zsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">$ git</span><br><span class="line"></span><br><span class="line">usage: git [--version] [--<span class="built_in">help</span>] [-C &lt;path&gt;] [-c &lt;name&gt;=&lt;value&gt;]</span><br><span class="line">           [--<span class="built_in">exec</span>-path[=&lt;path&gt;]] [--html-path] [--man-path] [--info-path]</span><br><span class="line">           [-p | --paginate | -P | --no-pager] [--no-replace-objects] [--bare]</span><br><span class="line">           [--git-dir=&lt;path&gt;] [--work-tree=&lt;path&gt;] [--namespace=&lt;name&gt;]</span><br><span class="line">           &lt;<span class="built_in">command</span>&gt; [&lt;args&gt;]</span><br><span class="line"></span><br><span class="line">这些是各种场合常见的 Git 命令：</span><br><span class="line"></span><br><span class="line">开始一个工作区（参见：git <span class="built_in">help</span> tutorial）</span><br><span class="line">   <span class="built_in">clone</span>      克隆一个仓库到一个新目录</span><br><span class="line">   init       创建一个空的 Git 仓库或重新初始化一个已存在的仓库</span><br><span class="line"></span><br><span class="line">在当前变更上工作（参见：git <span class="built_in">help</span> everyday）</span><br><span class="line">   add        添加文件内容至索引</span><br><span class="line">   mv         移动或重命名一个文件、目录或符号链接</span><br><span class="line">   reset      重置当前 HEAD 到指定状态</span><br><span class="line">   rm         从工作区和索引中删除文件</span><br><span class="line"></span><br><span class="line">检查历史和状态（参见：git <span class="built_in">help</span> revisions）</span><br><span class="line">   bisect     通过二分查找定位引入 bug 的提交</span><br><span class="line">   grep       输出和模式匹配的行</span><br><span class="line">   <span class="built_in">log</span>        显示提交日志</span><br><span class="line">   show       显示各种类型的对象</span><br><span class="line">   status     显示工作区状态</span><br><span class="line"></span><br><span class="line">扩展、标记和调校您的历史记录</span><br><span class="line">   branch     列出、创建或删除分支</span><br><span class="line">   checkout   切换分支或恢复工作区文件</span><br><span class="line">   commit     记录变更到仓库</span><br><span class="line">   diff       显示提交之间、提交和工作区之间等的差异</span><br><span class="line">   merge      合并两个或更多开发历史</span><br><span class="line">   rebase     在另一个分支上重新应用提交</span><br><span class="line">   tag        创建、列出、删除或校验一个 GPG 签名的标签对象</span><br><span class="line"></span><br><span class="line">协同（参见：git <span class="built_in">help</span> workflows）</span><br><span class="line">   fetch      从另外一个仓库下载对象和引用</span><br><span class="line">   pull       获取并整合另外的仓库或一个本地分支</span><br><span class="line">   push       更新远程引用和相关的对象</span><br><span class="line"></span><br><span class="line">命令 <span class="string">'git help -a'</span> 和 <span class="string">'git help -g'</span> 显示可用的子命令和一些概念帮助。</span><br><span class="line">查看 <span class="string">'git help &lt;命令&gt;'</span> 或 <span class="string">'git help &lt;概念&gt;'</span> 以获取给定子命令或概念的</span><br><span class="line">帮助。</span><br></pre></td></tr></table></figure>
<h2 id="安装与配置"><a href="#安装与配置" class="headerlink" title="安装与配置"></a>安装与配置</h2><h3 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ brew install git</span><br></pre></td></tr></table></figure>
<h3 id="全局配置"><a href="#全局配置" class="headerlink" title="全局配置"></a>全局配置</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">$ git config</span><br><span class="line"></span><br><span class="line">用法：git config [&lt;选项&gt;]</span><br><span class="line"></span><br><span class="line">配置文件位置</span><br><span class="line">    --global              使用全局配置文件</span><br><span class="line">    --system              使用系统级配置文件</span><br><span class="line">    --<span class="built_in">local</span>               使用仓库级配置文件</span><br><span class="line">    -f, --file &lt;文件&gt;     使用指定的配置文件</span><br><span class="line">    --blob &lt;数据对象 ID&gt;  从给定的数据对象读取配置</span><br><span class="line"></span><br><span class="line">操作</span><br><span class="line">    --get                 获取值：name [value-regex]</span><br><span class="line">    --get-all             获得所有的值：key [value-regex]</span><br><span class="line">    --get-regexp          根据正则表达式获得值：name-regex [value-regex]</span><br><span class="line">    --get-urlmatch        获得 URL 取值：section[.var] URL</span><br><span class="line">    --replace-all         替换所有匹配的变量：name value [value_regex]</span><br><span class="line">    --add                 添加一个新的变量：name value</span><br><span class="line">    --<span class="built_in">unset</span>               删除一个变量：name [value-regex]</span><br><span class="line">    --<span class="built_in">unset</span>-all           删除所有匹配项：name [value-regex]</span><br><span class="line">    --rename-section      重命名小节：old-name new-name</span><br><span class="line">    --remove-section      删除一个小节：name</span><br><span class="line">    -l, --list            列出所有</span><br><span class="line">    -e, --edit            打开一个编辑器</span><br><span class="line">    --get-color           获得配置的颜色：配置 [默认]</span><br><span class="line">    --get-colorbool       获得颜色设置：配置 [stdout-is-tty]</span><br><span class="line"></span><br><span class="line">类型</span><br><span class="line">    -t, --<span class="built_in">type</span> &lt;&gt;         取值为该类型</span><br><span class="line">    --bool                值是 <span class="string">"true"</span> 或 <span class="string">"false"</span></span><br><span class="line">    --int                 值是十进制数</span><br><span class="line">    --bool-or-int         值是 --bool or --int</span><br><span class="line">    --path                值是一个路径（文件或目录名）</span><br><span class="line">    --expiry-date         值是一个到期日期</span><br><span class="line"></span><br><span class="line">其它</span><br><span class="line">    -z, --null            终止值是 NUL 字节</span><br><span class="line">    --name-only           只显示变量名</span><br><span class="line">    --includes            查询时参照 include 指令递归查找</span><br><span class="line">    --show-origin         显示配置的来源（文件、标准输入、数据对象，或命令行）</span><br><span class="line">    --default &lt;取值&gt;      使用 --get 参数，当缺少设置时使用默认值</span><br></pre></td></tr></table></figure>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ git config --global user.name <span class="string">"xxx"</span></span><br><span class="line">$ git config --global user.email <span class="string">"xxx@xxx"</span></span><br></pre></td></tr></table></figure>
<h2 id="创建版本库"><a href="#创建版本库" class="headerlink" title="创建版本库"></a>创建版本库</h2><h3 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h3><p>选择合适的位置并创建一个空目录</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ mkdir gittest</span><br><span class="line">$ <span class="built_in">cd</span> gittest</span><br><span class="line">$ git init</span><br><span class="line"></span><br><span class="line">已初始化空的 Git 仓库于 /Users/tonghao/gittest/.git/</span><br></pre></td></tr></table></figure>
<h3 id="添加文件"><a href="#添加文件" class="headerlink" title="添加文件"></a>添加文件</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ touch test.txt</span><br><span class="line">$ vi test.txt</span><br></pre></td></tr></table></figure>
<p>第一次编辑文本内容为：</p>
<blockquote>
<p>I love you</p>
</blockquote>
<p>将此文件添加到git仓库有两步：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ git add test.txt</span><br><span class="line">$ git commit -m <span class="string">"first commit"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># -m后面为本次提交的简要说明</span></span><br><span class="line"></span><br><span class="line">[master（根提交） 6b774c9] first commit</span><br><span class="line"> 1 file changed, 1 insertion(+)</span><br><span class="line"> create mode 100644 test.txt</span><br></pre></td></tr></table></figure>
<p><code>commit</code>可以一次提交很多文件，所以可以多次<code>add</code>不同的文件</p>
<h2 id="版本更新与回退"><a href="#版本更新与回退" class="headerlink" title="版本更新与回退"></a>版本更新与回退</h2><h3 id="版本更新"><a href="#版本更新" class="headerlink" title="版本更新"></a>版本更新</h3><p>继续修改文件为：</p>
<blockquote>
<p>I love you<br>I love you tons</p>
</blockquote>
<p><code>git status</code>命令可以让我们时刻掌握仓库当前的状态</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ git status</span><br><span class="line"></span><br><span class="line">位于分支 master</span><br><span class="line">尚未暂存以备提交的变更：</span><br><span class="line">  （使用 <span class="string">"git add &lt;文件&gt;..."</span> 更新要提交的内容）</span><br><span class="line">  （使用 <span class="string">"git checkout -- &lt;文件&gt;..."</span> 丢弃工作区的改动）</span><br><span class="line"></span><br><span class="line">	修改：     test.txt</span><br><span class="line"></span><br><span class="line">修改尚未加入提交（使用 <span class="string">"git add"</span> 和/或 <span class="string">"git commit -a"</span>）</span><br></pre></td></tr></table></figure>
<p>上面的命令输出告诉我们，test.txt被修改过了，但还没有准备提交的修改</p>
<p>可以使用<code>git diff</code>查看修改内容</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ git diff</span><br><span class="line"></span><br><span class="line">diff --git a/test.txt b/test.txt</span><br><span class="line">index 4499f50..ee42064 100644</span><br><span class="line">--- a/test.txt</span><br><span class="line">+++ b/test.txt</span><br><span class="line">@@ -1 +1,2 @@</span><br><span class="line"> I love you</span><br><span class="line">+I love you tons</span><br></pre></td></tr></table></figure>
<p>先执行<code>git add</code>提交到暂存区</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ git add test.txt</span><br><span class="line">$ git status</span><br><span class="line"></span><br><span class="line">位于分支 master</span><br><span class="line">要提交的变更：</span><br><span class="line">  （使用 <span class="string">"git reset HEAD &lt;文件&gt;..."</span> 以取消暂存）</span><br><span class="line"></span><br><span class="line">	修改：     test.txt</span><br></pre></td></tr></table></figure>
<p>执行<code>git commit</code>把暂存区的所有修改提交到分支</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ git commit -m <span class="string">"second commit"</span></span><br><span class="line">$ git status</span><br><span class="line"></span><br><span class="line">位于分支 master</span><br><span class="line">无文件要提交，干净的工作区</span><br></pre></td></tr></table></figure>
<h3 id="版本回退"><a href="#版本回退" class="headerlink" title="版本回退"></a>版本回退</h3><p>再次修改test.txt并提交</p>
<blockquote>
<p>I love you<br>I love you tons<br>I love you three thousand</p>
</blockquote>
<p>可以使用<code>git log</code>命令查看历史记录</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">log</span></span><br><span class="line"></span><br><span class="line">commit c9d8c3067028da10687fa9809365e065c2f4de6a (HEAD -&gt; master)</span><br><span class="line">Author: tfcx-th &lt;tonghao_xjtu@qq.com&gt;</span><br><span class="line">Date:   Tue May 28 15:21:35 2019 +0800</span><br><span class="line"></span><br><span class="line">    third commit</span><br><span class="line"></span><br><span class="line">commit 85930502644c8259efba527546620749e7783ee8</span><br><span class="line">Author: tfcx-th &lt;tonghao_xjtu@qq.com&gt;</span><br><span class="line">Date:   Tue May 28 15:19:09 2019 +0800</span><br><span class="line"></span><br><span class="line">    second commit</span><br><span class="line"></span><br><span class="line">commit 6b774c9cd5a5e7889f498300e5aebdcd2d933dff</span><br><span class="line">Author: tfcx-th &lt;tonghao_xjtu@qq.com&gt;</span><br><span class="line">Date:   Tue May 28 14:47:31 2019 +0800</span><br><span class="line"></span><br><span class="line">    first commit</span><br></pre></td></tr></table></figure>
<p>或者加上<code>--pretty=oneline</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">$ git <span class="built_in">log</span> --pretty=oneline</span><br><span class="line"></span><br><span class="line">c9d8c3067028da10687fa9809365e065c2f4de6a (HEAD -&gt; master) third commit</span><br><span class="line">85930502644c8259efba527546620749e7783ee8 second commit</span><br><span class="line">6b774c9cd5a5e7889f498300e5aebdcd2d933dff first commit</span><br></pre></td></tr></table></figure>
<p>将test.txt回退版本，可以使用<code>git reset</code>命令；在git中，<code>HEAD</code>指向当前版本，上一个版本是<code>HEAD^</code>，上上个版本是<code>HEAD^^</code>，上100个版本可以写成<code>HEAD-100</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ git reset --hard HEAD^</span><br><span class="line"></span><br><span class="line">HEAD 现在位于 8593050 second commit</span><br></pre></td></tr></table></figure>
<p>查看文件内容</p>
<blockquote>
<p>I love you<br>I love you tons</p>
</blockquote>
<p>回退以后想要回到原来的版本依然可以使用<code>git reset</code>，只需要一部分<code>commmit id</code>即可</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git reset --hard c9d8c</span><br><span class="line"></span><br><span class="line">HEAD 现在位于 c9d8c30 third commit</span><br></pre></td></tr></table></figure>
<blockquote>
<p>I love you<br>I love you tons<br>I love you three thousand</p>
</blockquote>
<p>可以用<code>git reflog</code>查看命令历史</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">$ git reflog</span><br><span class="line"></span><br><span class="line">c9d8c30 (HEAD -&gt; master) HEAD@&#123;0&#125;: reset: moving to c9d8c</span><br><span class="line">8593050 HEAD@&#123;1&#125;: reset: moving to HEAD^</span><br><span class="line">c9d8c30 (HEAD -&gt; master) HEAD@&#123;2&#125;: commit: third commit</span><br><span class="line">8593050 HEAD@&#123;3&#125;: commit: second commit</span><br><span class="line">6b774c9 HEAD@&#123;4&#125;: commit (initial): first commit</span><br></pre></td></tr></table></figure>
<h3 id="撤销修改"><a href="#撤销修改" class="headerlink" title="撤销修改"></a>撤销修改</h3><p>假设将test.txt作如下修改</p>
<blockquote>
<p>I love you<br>I love you tons<br>I love you three thousand<br>asdasdasdasdasdasdasdasdasd<br>dasdasd</p>
</blockquote>
<p>如果在提交之前想撤销这次修改，可以使用<code>git checkout -- &lt;file&gt;</code>把文件在工作区的修改全部撤销</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ git checkout -- test.txt</span><br></pre></td></tr></table></figure>
<p>可以看到，test.txt变回原状态</p>
<blockquote>
<p>I love you<br>I love you tons<br>I love you three thousand</p>
</blockquote>
<p>如果文件已经添加到暂存区后，又作了修改，撤销修改就回到添加到暂存区后的状态</p>
<p>总之，<code>git checkout -- &lt;file&gt;</code>就是让文件回到最近一次git commit或git add时的状态</p>
<p>对于已经<code>git add</code>到暂存区但并没有<code>commit</code>的文件，可以使用<code>git reset HEAD &lt;file&gt;</code>把暂存区的修改撤销掉，重新放回工作区，然后再撤销工作区的修改</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">$ git status</span><br><span class="line"></span><br><span class="line">位于分支 master</span><br><span class="line">要提交的变更：</span><br><span class="line">  （使用 <span class="string">"git reset HEAD &lt;文件&gt;..."</span> 以取消暂存）</span><br><span class="line"></span><br><span class="line">	修改：     test.txt</span><br><span class="line"></span><br><span class="line">$ git reset HEAD test.txt</span><br><span class="line"></span><br><span class="line">$ git status</span><br><span class="line"></span><br><span class="line">位于分支 master</span><br><span class="line">尚未暂存以备提交的变更：</span><br><span class="line">  （使用 <span class="string">"git add &lt;文件&gt;..."</span> 更新要提交的内容）</span><br><span class="line">  （使用 <span class="string">"git checkout -- &lt;文件&gt;..."</span> 丢弃工作区的改动）</span><br><span class="line"></span><br><span class="line">	修改：     test.txt</span><br></pre></td></tr></table></figure>
<h3 id="删除文件"><a href="#删除文件" class="headerlink" title="删除文件"></a>删除文件</h3><p>在git中，删除是一个修改操作</p>
<p>测试一下常见的<code>rm</code>指令，首先提交一个del_test.txt文件，使用<code>rm</code>命令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ rm del_test.txt</span><br><span class="line">$ git status</span><br><span class="line"></span><br><span class="line">位于分支 master</span><br><span class="line">尚未暂存以备提交的变更：</span><br><span class="line">  （使用 <span class="string">"git add/rm &lt;文件&gt;..."</span> 更新要提交的内容）</span><br><span class="line">  （使用 <span class="string">"git checkout -- &lt;文件&gt;..."</span> 丢弃工作区的改动）</span><br><span class="line"></span><br><span class="line">	删除：     del_test.txt</span><br><span class="line"></span><br><span class="line">修改尚未加入提交（使用 <span class="string">"git add"</span> 和/或 <span class="string">"git commit -a"</span>）</span><br></pre></td></tr></table></figure>
<p>此时只删除了工作区的文件，而没有删除版本库中的文件</p>
<p>如果要从版本库中删除该文件，可以使用命令<code>git rm</code>删掉，并且<code>git commit</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">$ git rm del_test.txt</span><br><span class="line"></span><br><span class="line">rm <span class="string">'del_test.txt'</span></span><br><span class="line"></span><br><span class="line">$ git status</span><br><span class="line"></span><br><span class="line">位于分支 master</span><br><span class="line">要提交的变更：</span><br><span class="line">  （使用 <span class="string">"git reset HEAD &lt;文件&gt;..."</span> 以取消暂存）</span><br><span class="line"></span><br><span class="line">	删除：     del_test.txt</span><br><span class="line"></span><br><span class="line">$ git commit -m <span class="string">"delete test"</span></span><br><span class="line"></span><br><span class="line">[master 726f4c1] delete <span class="built_in">test</span></span><br><span class="line"> 1 file changed, 1 deletion(-)</span><br><span class="line"> delete mode 100644 del_test.txt</span><br></pre></td></tr></table></figure>
<p>如果是误删除，可以使用<code>git checkout -- &lt;file&gt;</code>撤销修改</p>
<p><code>git checkout</code>其实是用版本库里的版本替换工作区的版本，无论工作区是修改还是删除，都可以撤销</p>
<h2 id="GitHub远程仓库"><a href="#GitHub远程仓库" class="headerlink" title="GitHub远程仓库"></a>GitHub远程仓库</h2><p>本地的git仓库可以关联远程的GitHub。在GitHub上先创建一个repository，<br>在本地的git仓库输入：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">$ git remote add origin https://github.com/tfcx-th/gittest.git</span><br><span class="line">$ git push -u origin master</span><br><span class="line"></span><br><span class="line">枚举对象: 15, 完成.</span><br><span class="line">对象计数中: 100% (15/15), 完成.</span><br><span class="line">使用 4 个线程进行压缩</span><br><span class="line">压缩对象中: 100% (8/8), 完成.</span><br><span class="line">写入对象中: 100% (15/15), 1.13 KiB | 1.13 MiB/s, 完成.</span><br><span class="line">总共 15 （差异 1），复用 0 （差异 0）</span><br><span class="line">remote: Resolving deltas: 100% (1/1), <span class="keyword">done</span>.</span><br><span class="line">To https://github.com/tfcx-th/gittest.git</span><br><span class="line"> * [new branch]      master -&gt; master</span><br><span class="line">分支 <span class="string">'master'</span> 设置为跟踪来自 <span class="string">'origin'</span> 的远程分支 <span class="string">'master'</span>。</span><br></pre></td></tr></table></figure>
<p>把本地库的内容推送到远程，用<code>git push</code>命令，实际上是把当前分支master推送到远程</p>
<p>由于远程库是空的，第一次推送master分支时要加上了-u参数，Git不但会把本地的master分支内容推送的远程新的master分支，还会把本地的master分支和远程的master分支关联起来，在以后的推送或者拉取时就可以简化命令</p>
<p>如果远程仓库中本身有文件，<code>git push</code>后会出现如下情况</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">$ git push -u origin master</span><br><span class="line"></span><br><span class="line">To https://github.com/tfcx-th/gittest.git</span><br><span class="line"> ! [rejected]        master -&gt; master (fetch first)</span><br><span class="line">error: 推送一些引用到 <span class="string">'https://github.com/tfcx-th/gittest.git'</span> 失败</span><br><span class="line">提示：更新被拒绝，因为远程仓库包含您本地尚不存在的提交。这通常是因为另外</span><br><span class="line">提示：一个仓库已向该引用进行了推送。再次推送前，您可能需要先整合远程变更</span><br><span class="line">提示：（如 <span class="string">'git pull ...'</span>）。</span><br><span class="line">提示：详见 <span class="string">'git push --help'</span> 中的 <span class="string">'Note about fast-forwards'</span> 小节。</span><br></pre></td></tr></table></figure>
<p>此时需要先<code>git pull</code>，但会有如下问题</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$ git pull origin master</span><br><span class="line"></span><br><span class="line">warning: 没有共同的提交</span><br><span class="line">remote: Enumerating objects: 3, <span class="keyword">done</span>.</span><br><span class="line">Merge branch <span class="string">'master'</span> of https://github.com/tfcx-th/gittest</span><br><span class="line">remote: Counting objects: 100% (3/3), <span class="keyword">done</span>.</span><br><span class="line">remote: Total 3 (delta 0), reused 0 (delta 0), pack-reused 0</span><br><span class="line">展开对象中: 100% (3/3), 完成.</span><br><span class="line">来自 https://github.com/tfcx-th/gittest</span><br><span class="line"> * branch            master     -&gt; FETCH_HEAD</span><br><span class="line"> * [新分支]          master     -&gt; origin/master</span><br><span class="line">fatal: 拒绝合并无关的历史</span><br></pre></td></tr></table></figure>
<p>可以这样解决这个问题</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">$ git pull origin master --allow-unrelated-histories</span><br><span class="line"></span><br><span class="line"><span class="comment"># vi界面</span></span><br><span class="line">Merge branch <span class="string">'master'</span> of https://github.com/tfcx-th/gittest</span><br><span class="line"></span><br><span class="line">来自 https://github.com/tfcx-th/gittest</span><br><span class="line"> * branch            master     -&gt; FETCH_HEAD</span><br><span class="line">Merge made by the <span class="string">'recursive'</span> strategy.</span><br><span class="line"> README.md | 1 +</span><br><span class="line"> 1 file changed, 1 insertion(+)</span><br><span class="line"> create mode 100644 README.md</span><br></pre></td></tr></table></figure>
<p>之后就可以顺利<code>git push</code>了</p>
</div><div class="tags"><a href="/tags/DevTools/">DevTools</a><a href="/tags/git/">git</a></div><div class="post-nav"><a class="pre" href="/2019/05/29/测试驱动开发简介/">测试驱动开发</a><a class="next" href="/2019/05/18/ES6-内置对象的扩展（二）/">ES6-内置对象类型的扩展（二）</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.baidu.com/baidu" method="get" accept-charset="utf-8" target="_blank"><input type="search" name="word" maxlength="20" placeholder="Search"><input type="hidden" name="si" value="http://yoursite.com"><input name="tn" type="hidden" value="bds"><input name="cl" type="hidden" value="3"><input name="ct" type="hidden" value="2097152"><input name="s" type="hidden" value="on"></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/DevTools/">DevTools</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/JavaScript/">JavaScript</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/前端/">前端</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/可视化/">可视化</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/机器学习/">机器学习</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/测试/">测试</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/算法/">算法</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/网络/">网络</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/设计模式/">设计模式</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/测试/" style="font-size: 15px;">测试</a> <a href="/tags/前端/" style="font-size: 15px;">前端</a> <a href="/tags/JavaScript/" style="font-size: 15px;">JavaScript</a> <a href="/tags/ES6/" style="font-size: 15px;">ES6</a> <a href="/tags/网络/" style="font-size: 15px;">网络</a> <a href="/tags/Vue/" style="font-size: 15px;">Vue</a> <a href="/tags/前端框架/" style="font-size: 15px;">前端框架</a> <a href="/tags/算法/" style="font-size: 15px;">算法</a> <a href="/tags/可视化/" style="font-size: 15px;">可视化</a> <a href="/tags/《Data-Visualization-with-JavaScript》/" style="font-size: 15px;">《Data Visualization with JavaScript》</a> <a href="/tags/动态规划/" style="font-size: 15px;">动态规划</a> <a href="/tags/HTML-CSS/" style="font-size: 15px;">HTML&CSS</a> <a href="/tags/软件工程思想/" style="font-size: 15px;">软件工程思想</a> <a href="/tags/DevTools/" style="font-size: 15px;">DevTools</a> <a href="/tags/git/" style="font-size: 15px;">git</a> <a href="/tags/读书笔记/" style="font-size: 15px;">读书笔记</a> <a href="/tags/《CSS揭秘》/" style="font-size: 15px;">《CSS揭秘》</a> <a href="/tags/机器学习/" style="font-size: 15px;">机器学习</a> <a href="/tags/数据结构/" style="font-size: 15px;">数据结构</a> <a href="/tags/Vue源码/" style="font-size: 15px;">Vue源码</a> <a href="/tags/软件工程/" style="font-size: 15px;">软件工程</a> <a href="/tags/设计模式/" style="font-size: 15px;">设计模式</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2019/09/15/发布-订阅模式/">发布-订阅模式</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/09/10/CSS垂直居中/">CSS垂直居中</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/09/06/深拷贝与浅拷贝/">深拷贝与浅拷贝</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/09/02/JavaScript中Array常用方法/">JavaScript中Array的常用方法</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/08/29/二叉树基本操作的实现/">排序二叉树基本操作</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/08/25/Vue源码阅读——render/">Vue源码阅读（四）—— render</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/08/20/利用闭包实现函数的记忆/">利用闭包实现函数的记忆</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/08/17/《CSS揭秘》读书笔记（四）：文本/">《CSS揭秘》读书笔记（四）：文本</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/08/12/决策树/">决策树</a></li><li class="post-list-item"><a class="post-list-link" href="/2019/08/08/Vue源码阅读——Vue实例挂载/">Vue源码阅读（三）—— Vue实例挂载</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="https://github.com/tfcx-th" title="天赋创新的GitHub" target="_blank">天赋创新的GitHub</a><ul></ul><a href="mailto:tonghao_xjtu@qq.com" title="天赋创新的邮箱" target="_blank">天赋创新的邮箱</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2019 <a href="/." rel="nofollow">天赋创新的blog.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>